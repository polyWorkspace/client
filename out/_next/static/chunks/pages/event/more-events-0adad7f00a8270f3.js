(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4229],{91811:function(e,t,n){"use strict";var r=n(95318);t.Z=void 0;var a=r(n(64938)),c=n(85893),i=(0,a.default)((0,c.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorder");t.Z=i},42761:function(e,t,n){"use strict";var r=n(95318);t.Z=void 0;var a=r(n(64938)),c=n(85893),i=(0,a.default)((0,c.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");t.Z=i},59739:function(e,t,n){"use strict";var r=n(95318);t.Z=void 0;var a=r(n(64938)),c=n(85893),i=(0,a.default)((0,c.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92c0-1.61-1.31-2.92-2.92-2.92zM18 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM6 13c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm12 7.02c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"}),"ShareOutlined");t.Z=i},25802:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(67294),a=n(76798),c=n(59499),i=n(15568),s=n(85893);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var l=r.forwardRef((function(e,t){return(0,s.jsx)(i.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({elevation:6,ref:t,variant:"filled"},e))})),u=l,_=n(77227),v=function(e){var t=e.open;return(0,s.jsx)(_.Z,{sx:{color:"#fff",zIndex:9999},open:t,children:(0,s.jsx)("img",{src:"/loadingWhite.svg",style:{width:100,height:100},alt:"img"})})},d=n(37196),h=n.n(d),p=function(e){var t=e.openSnack,n=e.snackMsg,r=e.alertType,c=e.openLoading,i=e.onClose;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v,{open:c}),(0,s.jsx)(a.Z,{open:t,anchorOrigin:{vertical:"top",horizontal:"right"},className:h().snack_area,autoHideDuration:3e3,onClose:i,children:(0,s.jsx)(u,{onClose:i,sx:{width:"100%"},severity:r,children:n})})]})}},68080:function(e,t,n){"use strict";n.r(t);var r=n(50029),a=n(87794),c=n.n(a),i=n(67294),s=n(25643),o=n.n(s),l=n(12873),u=n(55819),_=n(42761),v=n(59739),d=n(91811),h=n(25617),p=n(11163),f=n(25802),m=n(85893);t.default=function(){var e,t=(0,i.useState)("both"),n=t[0],a=t[1],s=(0,i.useState)([]),g=s[0],j=s[1],x=(0,i.useState)(!1),w=x[0],y=x[1],E=(0,i.useState)(!1),b=E[0],N=E[1],O=(0,i.useState)(!1),M=O[0],Z=O[1],C=(0,i.useState)("success"),S=C[0],k=C[1],z=(0,i.useState)(""),I=z[0],P=z[1],L=(0,i.useState)(""),D=L[0],T=L[1],F=(0,h.v9)((function(e){return e.wallet})),R=(0,p.useRouter)(),V=[];(0,i.useLayoutEffect)((function(){A()}),[]);var A=function(){var e,t=F.contract,n=F.walletConnection.getAccountId();null===t||void 0===t||null===(e=t.get_event_count)||void 0===e||e.call(t,{userId:n}).then((function(e){W({total:e})})).catch((function(e){console.log(e)}))},K=function(e){try{var t=parseFloat(e),n=new Date(t),r=n.toLocaleDateString(),a=n.toLocaleTimeString();return"".concat(r," @ ").concat(a)}catch(c){return"unknow"}},W=function(){var e=(0,r.Z)(c().mark((function e(t){var n,a,i,s,o,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.total,a=F.contract,i=F.walletConnection,s=n%5===0?n/5:parseInt(n/5)+1,o=new Array(s).fill(0),l=i.getAccountId(),e.next=7,Promise.all(o.map(function(){var e=(0,r.Z)(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.get_events({userId:l,page:n+1}).then((function(e){e&&(e.data.map((function(e){var t="Online";switch(e.event_type){case 1:t="In person";break;case 2:t="Online + In person"}var n={id:e.id,name:e.name,type:t,date:K(e.start_date),attendees:e.participants.length};V.push(n)})),j([].concat(V)))}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(e){var t=e.type,n=e.msg;Z(!0),N(!1),k(t),P(n)};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(f.Z,{openLoading:b,openSnack:M,alertType:S,snackMsg:I,onClose:function(){Z(!1)}}),(0,m.jsxs)("div",{className:o().root,children:[(0,m.jsx)("div",{className:o().search,children:(0,m.jsxs)("div",{className:o().search_row,children:[(0,m.jsxs)("div",{className:o().search_area,children:[(0,m.jsx)("input",{placeholder:"Find your next event",className:o().search_input,value:D,onChange:function(e){T(e.currentTarget.value)}}),(0,m.jsx)(_.Z,{className:o().search_icon})]}),(0,m.jsx)("input",{className:o().search_input_location,placeholder:"Location"}),(0,m.jsxs)(l.Z,{value:n,onChange:function(e){a(e.target.value)},className:o().search_button_select,inputProps:{"aria-label":"Without label"},displayEmpty:!0,children:[(0,m.jsx)(u.Z,{value:"both",children:"Online + In person"}),(0,m.jsx)(u.Z,{value:"online",children:"Online"}),(0,m.jsx)(u.Z,{value:"inPerson",children:"In person"})]}),(0,m.jsx)("input",{type:"date",className:o().search_input_location,placeholder:"Date"}),(0,m.jsx)("button",{className:o().search_button,onClick:function(){var e;""!=(e=D)&&R.push("/event/event-detail?id=".concat(e))},children:"Search"})]})}),(0,m.jsxs)("div",{className:o().event,children:[(0,m.jsx)("div",{className:o().line}),null===g||void 0===g||null===(e=g.map)||void 0===e?void 0:e.call(g,(function(e){return(0,m.jsxs)("div",{className:o().event_item,children:[(0,m.jsx)("img",{src:"/calendar.svg",className:o().event_item_img,alt:"img"}),(0,m.jsxs)("div",{className:o().event_item_info,children:[(0,m.jsx)("div",{className:o().event_item_date,children:e.date}),(0,m.jsx)("div",{className:o().event_item_name,onClick:function(){return t=e.id,void R.push("/event/event-detail?id=".concat(t));var t},children:e.name}),(0,m.jsxs)("div",{className:o().event_item_attendees,children:[e.attendees," attendees"]})]}),(0,m.jsxs)("div",{className:o().event_item_share,children:[(0,m.jsx)(v.Z,{className:o().event_item_icon,onClick:function(){return function(e){var t=new URL(window.location.href).origin;navigator.clipboard.writeText("".concat(t,"/event/event-detail?id=").concat(e)),Q({type:"success",msg:"copied"})}(e.id)}}),(0,m.jsx)(d.Z,{className:o().event_item_icon_favor,onClick:function(){return function(e){var t=F.contract;N(!0),w?(null===t||void 0===t||t.not_interest_event({eventId:e},5e13).then((function(e){Q(e?{type:"success",msg:"Disinterested"}:{type:"error",msg:"Error when disinterested"})})).catch((function(e){Q({type:"error",msg:String(e)})})),y(!1)):(null===t||void 0===t||t.interest_event({eventId:e},5e13).then((function(e){Q(e?{type:"success",msg:"Interested"}:{type:"error",msg:"Error when interested"})})).catch((function(e){Q({type:"error",msg:String(e)})})),y(!0))}(e.id)}})]})]},e.id)}))]})]})]})}},68223:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/event/more-events",function(){return n(68080)}])},37196:function(e){e.exports={snack_area:"Notify_snack_area__VKRcf"}},25643:function(e){e.exports={root:"MoreEvent_root__WgcOd",search:"MoreEvent_search___JVKQ",search_row:"MoreEvent_search_row__zVO4g",search_area:"MoreEvent_search_area__Ap4Kr",search_input:"MoreEvent_search_input__VnV9u",search_icon:"MoreEvent_search_icon__ouxF1",search_input_location:"MoreEvent_search_input_location__iq4Q5",search_button_select:"MoreEvent_search_button_select__xjlUD",search_button:"MoreEvent_search_button__OtZ6R",line:"MoreEvent_line__zFmjR",event:"MoreEvent_event__C3W44",event_item:"MoreEvent_event_item__zKvCV",event_item_img:"MoreEvent_event_item_img__TMZ8d",event_item_info:"MoreEvent_event_item_info__mnjoY",event_item_date:"MoreEvent_event_item_date__Ze9c1",event_item_name:"MoreEvent_event_item_name__oGi4E",event_item_icon:"MoreEvent_event_item_icon__Zu8xt",event_item_icon_favor:"MoreEvent_event_item_icon_favor__Lwsvt"}}},function(e){e.O(0,[7739,6775,9991,9774,2888,179],(function(){return t=68223,e(e.s=t);var t}));var t=e.O();_N_E=t}]);