(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2019],{44179:function(e,n,t){"use strict";var o=t(95318);n.Z=void 0;var r=o(t(64938)),i=t(85893),a=(0,r.default)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4 8-8z"}),"CheckCircleOutlineOutlined");n.Z=a},25802:function(e,n,t){"use strict";t.d(n,{Z:function(){return f}});var o=t(67294),r=t(76798),i=t(59499),a=t(15568),c=t(85893);function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}var l=o.forwardRef((function(e,n){return(0,c.jsx)(a.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({elevation:6,ref:n,variant:"filled"},e))})),u=l,_=t(77227),d=function(e){var n=e.open;return(0,c.jsx)(_.Z,{sx:{color:"#fff",zIndex:9999},open:n,children:(0,c.jsx)("img",{src:"/loadingWhite.svg",style:{width:100,height:100},alt:"img"})})},v=t(37196),m=t.n(v),f=function(e){var n=e.openSnack,t=e.snackMsg,o=e.alertType,i=e.openLoading,a=e.onClose;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(d,{open:i}),(0,c.jsx)(r.Z,{open:n,anchorOrigin:{vertical:"top",horizontal:"right"},className:m().snack_area,autoHideDuration:3e3,onClose:a,children:(0,c.jsx)(u,{onClose:a,sx:{width:"100%"},severity:o,children:t})})]})}},95509:function(e,n,t){"use strict";t(67294);var o=t(96538),r=t.n(o),i=t(16573),a=t(1020),c=t(46616),s=t(87385),l=t(38168),u=t(44276),_=t(48137),d=t(66339),v=t(43800),m=t(86983),f=t(87357),h=t(15861),p=t(85893),g={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",minWidth:400,bgcolor:"#fff",borderRadius:"24px",boxShadow:24,p:4,outline:"none",paddingTop:"20px"};n.Z=function(e){var n=e.link;return(0,p.jsx)(m.Z,{open:!0,onClose:e.onCloseModal,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,p.jsxs)(f.Z,{sx:g,children:[(0,p.jsx)(h.Z,{id:"modal-modal-title",variant:"h6",component:"h2",textAlign:"center",children:"Share this event"}),(0,p.jsx)("div",{className:r().line_gradient}),(0,p.jsxs)("div",{className:r().container,children:[(0,p.jsxs)(i.Z,{url:n,quote:title,className:r().container_network,children:[(0,p.jsx)(a.Z,{size:32,round:!0}),(0,p.jsx)("div",{className:r().container_network_title,children:"Facebook"})]}),(0,p.jsxs)(c.Z,{url:n,title:title,className:r().container_network,children:[(0,p.jsx)(s.Z,{size:32,round:!0}),(0,p.jsx)("div",{className:r().container_network_title,children:"Twitter"})]}),(0,p.jsxs)(l.Z,{url:n,title:title,className:r().container_network,children:[(0,p.jsx)(u.Z,{size:32,round:!0}),(0,p.jsx)("div",{className:r().container_network_title,children:"Telegram"})]}),(0,p.jsxs)(_.Z,{url:n,title:title,className:r().container_network,children:[(0,p.jsx)(d.Z,{size:32,round:!0}),(0,p.jsx)("div",{className:r().container_network_title,children:"Email"})]}),(0,p.jsxs)("button",{className:r().container_network,onClick:function(){navigator.clipboard.writeText(n),e.onCloseModal(),e.onSuccess()},children:[(0,p.jsx)("div",{className:r().container_network_icon,children:(0,p.jsx)(v.Z,{className:r().container_network_icon_svg})}),(0,p.jsx)("div",{className:r().container_network_title,children:"Copy link"})]})]})]})})}},32385:function(e,n,t){"use strict";t.r(n);var o=t(50029),r=t(9632),i=t(87794),a=t.n(i),c=t(67294),s=t(57089),l=t.n(s),u=t(44179),_=t(59739),d=t(91811),v=t(25617),m=t(11163),f=t(25802),h=t(95509),p=t(8791),g=t(36111),x=t(85893),j=t(34155);function y(e,n){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"===typeof e)return w(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return w(e,n)}(e))||n&&e&&"number"===typeof e.length){t&&(e=t);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==t.return||t.return()}finally{if(c)throw i}}}}function w(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=new Array(n);t<n;t++)o[t]=e[t];return o}var k=function(e){var n,t=e.item,r=e.label,i=(e.activeTab,(0,c.useState)("")),s=i[0],d=i[1];(0,c.useEffect)((function(){v()}),[]);var v=function(){var e=(0,o.Z)(a().mark((function e(){var n,o,r,i,c,s,l,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.cover_image||""===t.cover_image||"/calendar.svg"!==t.img){e.next=11;break}return o=new p.xk({token:j.env.NEXT_PUBLIC_w3key}),e.next=4,null===o||void 0===o||null===(n=o.get)||void 0===n?void 0:n.call(o,t.cover_image);case 4:if(!(r=e.sent).ok){e.next=11;break}return e.next=8,r.files();case 8:i=e.sent,c=y(i);try{for(c.s();!(s=c.n()).done;)l=s.value,(u=new FileReader).onload=function(e){d(e.target.result)},u.readAsDataURL(l)}catch(a){c.e(a)}finally{c.f()}case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,x.jsxs)("div",{className:l().content_event_item,children:[(0,x.jsx)("img",{src:s,className:l().content_event_item_img,alt:"img"}),(0,x.jsxs)("div",{className:l().content_event_item_info,onClick:function(){return e.onEventItemClick(t.id)},children:[(0,x.jsx)("div",{className:l().content_event_item_date,children:t.date}),(0,x.jsx)("div",{className:l().content_event_item_name,children:t.name}),(0,x.jsxs)("div",{className:l().content_event_item_attendees,children:[t.attendees," attendees"]}),(0,x.jsxs)("div",{className:l().content_event_item_attending,children:[(0,x.jsx)(u.Z,{}),r]})]}),(0,x.jsxs)("div",{className:l().content_event_item_share,children:[(0,x.jsx)(_.Z,{className:l().content_event_item_icon,onClick:function(){return e.onGetSharedLink(t.id)}}),null===e||void 0===e||null===(n=e.renderInterestedIcon)||void 0===n?void 0:n.call(e,t)]})]})};n.default=function(){var e,n,t,i,s=(0,c.useState)("upcoming"),u=s[0],_=s[1],p=(0,c.useState)([]),j=p[0],y=p[1],w=(0,c.useState)([]),b=w[0],N=w[1],S=(0,c.useState)([]),E=S[0],I=S[1],Z=(0,c.useState)([]),C=Z[0],M=Z[1],O=(0,c.useState)([]),A=O[0],T=O[1],L=(0,c.useState)(!1),D=L[0],P=L[1],F=(0,c.useState)(!1),R=F[0],G=F[1],z=(0,c.useState)("success"),U=z[0],Y=z[1],H=(0,c.useState)(""),K=H[0],X=H[1],q=(0,c.useState)(!0),B=q[0],J=q[1],W=(0,c.useState)(!0),V=W[0],Q=W[1],$=(0,c.useState)(!0),ee=$[0],ne=$[1],te=(0,c.useState)(!1),oe=te[0],re=te[1],ie=(0,c.useState)(!1),ae=ie[0],ce=ie[1],se=(0,c.useState)(""),le=se[0],ue=se[1],_e=(0,v.v9)((function(e){return e.wallet})),de=(0,m.useRouter)();(0,c.useLayoutEffect)((function(){pe(),fe()}),[]),(0,c.useEffect)((function(){if("[]"!==JSON.stringify(E)){var e=[],n=new Set;E.map((function(e,t){var o=(0,r.Z)(j).map((function(o){return o.id===e.id&&(o.isInterested=!0,n.add(t)),o}));y((0,r.Z)(o));var i=(0,r.Z)(b).map((function(o){return o.id===(null===e||void 0===e?void 0:e.id)&&(o.isInterested=!0,n.add(t)),o}));return N((0,r.Z)(i)),e})),null===E||void 0===E||E.map((function(t,o){return n.has(o)||e.push(t),t})),M([].concat(e))}}),[E]);var ve=function(e){var n=e.type,t=e.msg;G(!0),P(!1),Y(n),X(t)},me=function(e){var n,t="Online";switch(e.event_type){case 1:t="In person";break;case 2:t="Online + In person"}return{id:e.id,name:e.name,type:t,cover_image:e.cover_image,img:"/calendar.svg",date:ge(e.start_date),attendees:null===e||void 0===e||null===(n=e.participants)||void 0===n?void 0:n.length,date_timestamp:e.start_date,isInterested:!1}},fe=function(){var e,n=_e.contract,t=_e.walletConnection.getAccountId();null===n||void 0===n||null===(e=n.get_interested_event_count)||void 0===e||e.call(n,{userId:t}).then((function(e){he({total:e})})).catch((function(e){console.log(e)}))},he=function(){var e=(0,o.Z)(a().mark((function e(n){var t,r,i,c,s,l,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.total,r=_e.contract,i=_e.walletConnection,c=t%5===0?t/5:parseInt(t/5)+1,s=new Array(c).fill(0),l=i.getAccountId(),u=[],e.next=8,Promise.all(s.map(function(){var e=(0,o.Z)(a().mark((function e(n,t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.get_interested_events({userId:l,page:t+1}).then((function(e){e&&e.data.map((function(e){var n=me(e);return n.isInterested=!0,u.push(n),e}))}));case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())).then((function(){console.log(123123123),u.sort((function(e,n){return n.date_timestamp-e.date_timestamp})),I([].concat(u)),M([].concat(u))})).catch((function(e){console.log(e)}));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),pe=function(){var e,n=_e.contract,t=_e.walletConnection.getAccountId();null===n||void 0===n||null===(e=n.get_event_count)||void 0===e||e.call(n,{userId:t}).then((function(e){xe({total:e})})).catch((function(e){console.log(e)}))},ge=function(e){try{var n=parseFloat(e),t=new Date(n),o=t.toLocaleDateString(),r=t.toLocaleTimeString();return"".concat(o," @ ").concat(r)}catch(i){return"unknow"}},xe=function(){var e=(0,o.Z)(a().mark((function e(n){var t,r,i,c,s,l,u,_,d,v;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.total,r=_e.contract,i=_e.walletConnection,c=t%5===0?t/5:parseInt(t/5)+1,s=new Array(c).fill(0),l=i.getAccountId(),u=Date.now(),_=[],d=[],v=[],e.next=11,Promise.all(s.map(function(){var e=(0,o.Z)(a().mark((function e(n,t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.get_events({userId:l,page:t+1}).then((function(e){if(e)return null===e||void 0===e?void 0:e.data})).then((function(e){var n;null===e||void 0===e||null===(n=e.map)||void 0===n||n.call(e,(function(e){var n=me(e);return u>=parseFloat(e.end_date)?v.push(n):e.owner===l?_.push(n):d.push(n),e}))})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())).then((function(){d.sort((function(e,n){return n.date_timestamp-e.date_timestamp})),v.sort((function(e,n){return n.date_timestamp-e.date_timestamp})),_.sort((function(e,n){return n.date_timestamp-e.date_timestamp})),T([].concat(_)),y([].concat(d)),N([].concat(v))})).catch((function(e){console.log(e)}));case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),je=function(e){de.push("/event/event-detail?id=".concat(e))},ye=function(e){var n=new URL(window.location.href).origin;ue("".concat(n,"/event/event-detail?id=").concat(e)),ce(!0)},we=function(e){var n=_e.contract;_e.walletConnection.getAccountId()!==e.owner?(P(!0),null===n||void 0===n||n.interest_event({eventId:e.id},5e13).then((function(n){n?(ve({type:"success",msg:n}),e.isInterested="Interested"===n,y((0,r.Z)(j).map((function(n){return n.id===e.id?e:n}))),T((0,r.Z)(A).map((function(n){return n.id===e.id?e:n})))):ve({type:"error",msg:"Error when interested"})})).catch((function(e){ve({type:"error",msg:String(e)})}))):ve({type:"error",msg:"You are the owner of this event"})},ke=function(e){return e.isInterested?(0,x.jsx)(g.Z,{className:l().content_event_item_icon_favor,onClick:function(){return we(e)}}):(0,x.jsx)(d.Z,{className:l().content_event_item_icon_favor,onClick:function(){return we(e)}})};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(f.Z,{openLoading:D,openSnack:R,alertType:U,snackMsg:K,onClose:function(){G(!1)}}),(0,x.jsxs)("div",{className:l().root,children:[(0,x.jsxs)("div",{className:l().left_menu,children:[(0,x.jsxs)("div",{className:l().left_menu_row,children:[(0,x.jsx)("button",{className:"upcoming"===u?l().left_menu_button_active:l().left_menu_button,onClick:function(){return _("upcoming"),re(!1),Q(!0),J(!0),void ne(!0)},children:"Upcoming"}),(0,x.jsx)("button",{className:"past"===u?l().left_menu_button_active:l().left_menu_button,onClick:function(){return _("past"),re(!0),J(!1),ne(!1),void Q(!1)},children:"Past"})]}),(0,x.jsxs)("div",{className:l().left_menu_content,children:["upcoming"===u?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:l().left_menu_row,children:[(0,x.jsx)("input",{type:"checkbox",id:"attending",name:"attending",value:"attending",checked:B,onChange:function(e){return function(e){var n=e.target.checked;J(n)}(e)}}),(0,x.jsx)("label",{htmlFor:"attending",className:l().left_menu_label,children:"Attending"})]}),(0,x.jsxs)("div",{className:l().left_menu_row,children:[(0,x.jsx)("input",{type:"checkbox",id:"saved",name:"saved",value:"saved",checked:V,onChange:function(e){return function(e){var n=e.target.checked;Q(n)}(e)}}),(0,x.jsx)("label",{htmlFor:"saved",className:l().left_menu_label,children:"Saved"})]}),(0,x.jsxs)("div",{className:l().left_menu_row,children:[(0,x.jsx)("input",{type:"checkbox",id:"hosting",name:"hosting",value:"hosting",checked:ee,onChange:function(e){return function(e){var n=e.target.checked;ne(n)}(e)}}),(0,x.jsx)("label",{htmlFor:"hosting",className:l().left_menu_label,children:"Hosting"})]})]}):(0,x.jsxs)("div",{className:l().left_menu_content_text,children:["You're attend ",b.length," events in the past"]}),(0,x.jsx)("div",{className:l().left_menu_content_link,onClick:function(){return de.push("/calendar")},children:"Go to calendar"})]})]}),(0,x.jsxs)("div",{className:l().content,children:[(0,x.jsx)("div",{className:l().content_title,children:"Your Event"}),(0,x.jsxs)("div",{className:l().content_today,children:["Today, ",(new Date).toLocaleString("en-US",{month:"long"})," ",(new Date).getDate(),", ",(new Date).getFullYear()]}),(0,x.jsx)("div",{className:l().line}),B&&(0,x.jsx)("div",{className:l().content_event,children:null===j||void 0===j||null===(e=j.map)||void 0===e?void 0:e.call(j,(function(e,n){return e&&e.id?(0,x.jsx)(k,{item:e,label:"Attending",activeTab:u,onGetSharedLink:ye,onEventItemClick:je,renderInterestedIcon:ke},e.id):null}))}),oe&&(0,x.jsx)("div",{className:l().content_event,children:null===b||void 0===b||null===(n=b.map)||void 0===n?void 0:n.call(b,(function(e,n){return e&&e.id?(0,x.jsx)(k,{item:e,label:"Attented",activeTab:u,onGetSharedLink:ye,onEventItemClick:je,renderInterestedIcon:ke},e.id):null}))}),V&&(0,x.jsx)("div",{className:l().content_event,children:null===C||void 0===C||null===(t=C.map)||void 0===t?void 0:t.call(C,(function(e,n){return e&&e.id?(0,x.jsx)(k,{item:e,label:"Saved",activeTab:u,onGetSharedLink:ye,onEventItemClick:je,renderInterestedIcon:ke},e.id):null}))}),ee&&(0,x.jsx)("div",{className:l().content_event,children:null===A||void 0===A||null===(i=A.map)||void 0===i?void 0:i.call(A,(function(e,n){return e&&e.id?(0,x.jsx)(k,{item:e,label:"Hosting",activeTab:u,onGetSharedLink:ye,onEventItemClick:je},e.id):null}))})]})]}),ae&&(0,x.jsx)(h.Z,{link:le,onCloseModal:function(){ce(!1)},onSuccess:function(){ve({type:"success",msg:"copied"})}})]})}},681:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/event/my-event",function(){return t(32385)}])},37196:function(e){e.exports={snack_area:"Notify_snack_area__VKRcf"}},96538:function(e){e.exports={container:"Share_container__HK0Kf",container_network:"Share_container_network__d7E0n",container_network_title:"Share_container_network_title__vnpou",container_network_icon:"Share_container_network_icon__t1RMB",container_network_icon_svg:"Share_container_network_icon_svg__qAnU_",line_gradient:"Share_line_gradient__A0WlO"}},57089:function(e){e.exports={root:"MyEvent_root__6TyNL",left_menu:"MyEvent_left_menu__RAou_",left_menu_content:"MyEvent_left_menu_content__RA_QE",left_menu_content_text:"MyEvent_left_menu_content_text__I8T_V",left_menu_content_link:"MyEvent_left_menu_content_link__3vf_d",left_menu_row:"MyEvent_left_menu_row__RJKya",left_menu_button:"MyEvent_left_menu_button__Kd2vg",left_menu_button_active:"MyEvent_left_menu_button_active__7xTHa",left_menu_label:"MyEvent_left_menu_label__ZDD5G",content:"MyEvent_content__G6vac",content_title:"MyEvent_content_title__jPIww",content_today:"MyEvent_content_today__w7cnR",content_event:"MyEvent_content_event__Erd6U",content_event_item:"MyEvent_content_event_item__6XIeZ",content_event_item_img:"MyEvent_content_event_item_img__fBm_e",content_event_item_info:"MyEvent_content_event_item_info__bPYUD",content_event_item_date:"MyEvent_content_event_item_date__G8lml",content_event_item_name:"MyEvent_content_event_item_name__GcqxA",content_event_item_icon:"MyEvent_content_event_item_icon__g9exh",content_event_item_icon_favor:"MyEvent_content_event_item_icon_favor__TeFnN",content_event_item_attending:"MyEvent_content_event_item_attending__sY8uO",content_event_nothing:"MyEvent_content_event_nothing__rdaiJ",line:"MyEvent_line__ojFn0"}}},function(e){e.O(0,[7739,6775,5334,1357,9774,2888,179],(function(){return n=681,e(e.s=n);var n}));var n=e.O();_N_E=n}]);