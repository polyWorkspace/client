(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8025],{25802:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var r=n(67294),o=n(76798),a=n(59499),i=n(15568),l=n(85893);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var u=r.forwardRef((function(e,t){return(0,l.jsx)(i.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({elevation:6,ref:t,variant:"filled"},e))})),s=u,d=n(77227),v=function(e){var t=e.open;return(0,l.jsx)(d.Z,{sx:{color:"#fff",zIndex:9999},open:t,children:(0,l.jsx)("img",{src:"/loadingWhite.svg",style:{width:100,height:100},alt:"img"})})},p=n(37196),f=n.n(p),_=function(e){var t=e.openSnack,n=e.snackMsg,r=e.alertType,a=e.openLoading,i=e.onClose;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(v,{open:a}),(0,l.jsx)(o.Z,{open:t,anchorOrigin:{vertical:"top",horizontal:"right"},className:f().snack_area,autoHideDuration:3e3,onClose:i,children:(0,l.jsx)(s,{onClose:i,sx:{width:"100%"},severity:r,children:n})})]})}},35707:function(e,t,n){"use strict";n.r(t);var r=n(9632),o=n(50029),a=n(87794),i=n.n(a),l=n(67294),c=n(25617),u=n(11163),s=n(57465),d=n.n(s),v=n(25802),p=n(8791),f=n(30381),_=n.n(f),m=n(94921),h=n(85893),g=n(34155),y=function(e){var t,n,a=e.id,s=(0,c.v9)((function(e){return e.wallet})),f=s.walletConnection.getAccountId(),y=(0,u.useRouter)(),x=(0,l.useState)(""),j=x[0],w=x[1],E=(0,l.useState)([{value:""}]),N=E[0],k=E[1],C=(0,l.useState)(),O=C[0],S=C[1],I=(0,l.useState)(0),D=I[0],P=I[1],Z=(0,l.useRef)(),T=(0,l.useState)(!1),z=T[0],F=T[1],R=(0,l.useState)(!1),X=R[0],M=R[1],Y=(0,l.useState)("success"),U=Y[0],H=Y[1],L=(0,l.useState)(""),q=L[0],A=L[1],B=(0,l.useState)(Date.now()),W=B[0],J=B[1],K=(0,l.useState)(Date.now()),Q=K[0],V=K[1],G=(0,l.useState)(""),$=G[0],ee=G[1],te=function(e){var t=e.type,n=e.msg;M(!0),F(!1),H(t),A(n)};(0,l.useEffect)((function(){ne()}),[]);var ne=function(){var e=s.contract;null===e||void 0===e||e.get_event({eventId:a}).then((function(e){if(e){console.log(e);var t,n,r=e.status,o=e.owner;if(0===r&&o!==f)le("You do not permission to access this page");else w(null===e||void 0===e?void 0:e.title),J(null===e||void 0===e?void 0:e.start_date),V(null===e||void 0===e?void 0:e.end_date),k(null===e||void 0===e||null===(t=e.description)||void 0===t||null===(n=t.map)||void 0===n?void 0:n.call(t,(function(e){return{value:e}}))),ee(null===e||void 0===e?void 0:e.url),P(null===e||void 0===e?void 0:e.type)}})).catch((function(e){console.log(e)}))},re=function(){var e=(0,o.Z)(i().mark((function e(){var t,n,r,o,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ae()){e.next=2;break}return e.abrupt("return");case 2:if(n=s.contract,r="","undefined"===typeof m.BX.current){e.next=9;break}return o=new p.xk({token:g.env.NEXT_PUBLIC_w3key}),e.next=8,o.put(Z.current);case 8:r=e.sent;case 9:l=N.filter((function(e){return null!==e.value&&"undefined"!==typeof e.value&&""!==e.value})).map((function(e){return e.value})),F(!0),null===n||void 0===n||null===(t=n.update_event_info)||void 0===t||t.call(n,{eventId:a,title:j,description:l,location:"Hanoi",privacy:[],cover_img:r,type:parseInt(D),start_date:W,end_date:Q,url:$},1e14).then((function(e){e?y.push("/event/event-detail?id=".concat(a)):te({type:"error",msg:"Creat event failure"})})).catch((function(e){te({type:"error",msg:String(e)})}));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(e){try{var t=parseFloat(e),n=new Date(t);return _()(n).format("YYYY-MM-DDThh:mm")}catch(r){return"unknow"}},ae=function(){if(""===j)return te({type:"error",msg:"Event name could not be null or empty"}),!1;var e=N.filter((function(e){return""===e.value||null===e.value||"undefined"===typeof e.value}));if(N.length===e.length)return te({type:"error",msg:"Event description could not be null or empty"}),!1;if(""===W||"undefined"===typeof W||null===W)return te({type:"error",msg:"starting time could not be empty"}),!1;if(""===Q||"undefined"===typeof Q||null===Q)return te({type:"error",msg:"ending date could not be empty"}),!1;if(Q<W)return te({type:"error",msg:"ending date could not less than starting date"}),!1;var t=Date.now();return Q<t?(te({type:"error",msg:"ending date could not less than current time"}),!1):(null!==Z.current&&"undefined"!==typeof Z.current&&0!==Z.current.length||te({type:"error",msg:"Cover image could not be empty"}),!0)},ie=function(e){P(e.target.value)},le=function(e){var t=encodeURIComponent(e);y.push("/error?content=".concat(t))};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(v.Z,{openLoading:z,openSnack:X,alertType:U,snackMsg:q,onClose:function(){M(!1)}}),(0,h.jsx)("div",{className:d().root,children:(0,h.jsxs)("div",{className:d().content,children:[(0,h.jsx)("div",{className:d().content_title,children:"Create Event"}),(0,h.jsx)("div",{className:d().content_label,children:"Event's name"}),(0,h.jsx)("input",{className:d().content_input,placeholder:"Enter event name",value:j,onChange:function(e){w(e.target.value)}}),(0,h.jsx)("div",{className:d().content_label,children:"Starting time"}),(0,h.jsx)("input",{type:"datetime-local",className:d().content_input,placeholder:"pick your event starting time",value:oe(W),onChange:function(e){var t=new Date(e.target.value);J(t.getTime().toString())}}),(0,h.jsx)("div",{className:d().content_label,children:"Ending time"}),(0,h.jsx)("input",{type:"datetime-local",className:d().content_input,placeholder:"pick your event ending time",value:oe(Q),onChange:function(e){var t=new Date(e.target.value);V(t.getTime().toString())}}),(0,h.jsx)("div",{className:d().content_label,children:"Details"}),null===N||void 0===N||null===(t=N.map)||void 0===t?void 0:t.call(N,(function(e,t){return(0,h.jsx)("textarea",{className:d().content_detail,rows:3,value:e.value,onChange:function(e){return function(e,t){N[e].value=t.target.value,k((0,r.Z)(N))}(t,e)}},t)})),(0,h.jsx)("button",{className:d().content_attend_button,onClick:function(){N.push({value:""}),k((0,r.Z)(N))},children:"Add new description"}),(0,h.jsx)("div",{className:d().content_label,children:"Image Cover"}),(0,h.jsx)("input",{className:d().content_input_file,type:"file",id:"create_event_file",ref:Z,onChange:function(e){var t,n=e.target.files;Z.current=n,S(null===n||void 0===n||null===(t=n[0])||void 0===t?void 0:t.name)}}),(0,h.jsx)("label",{htmlFor:"create_event_file",children:O||"Choose a file..."}),(0,h.jsx)("div",{className:d().content_label,children:"Event Type"}),(0,h.jsx)("div",{className:d().content_row,children:null===b||void 0===b||null===(n=b.map)||void 0===n?void 0:n.call(b,(function(e){return(0,h.jsxs)(l.Fragment,{children:[(0,h.jsx)("input",{type:"radio",id:e.id,checked:D===e.typeId,name:"event_type",value:e.typeId,onChange:ie}),(0,h.jsx)("label",{htmlFor:e.id,className:d().content_row_label,children:e.label})]},e.id)}))}),(0,h.jsx)("div",{className:d().content_label,children:"Online event link"}),(0,h.jsx)("input",{className:d().content_input,placeholder:"Enter event link",value:$,onChange:function(e){var t;ee(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)}}),(0,h.jsx)("button",{className:d().content_attend_button,onClick:re,children:"Save"})]})})]})};y.getInitialProps=function(){var e=(0,o.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query.id,e.abrupt("return",{id:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.default=y;var b=[{id:"online",typeId:0,label:"Online"},{id:"in_person",typeId:1,label:"In Person"},{id:"both",typeId:2,label:"Online + In Person"}]},10076:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/event/edit-event",function(){return n(35707)}])},37196:function(e){e.exports={snack_area:"Notify_snack_area__VKRcf"}},57465:function(e){e.exports={root:"EditEvent_root__7yzU8",content:"EditEvent_content__bb0aW",content_title:"EditEvent_content_title__z2RMJ",content_label:"EditEvent_content_label__zmUCb",content_input:"EditEvent_content_input__dQp3c",content_input_file:"EditEvent_content_input_file__HoXX_",content_detail:"EditEvent_content_detail__i8PqS",content_attend_button:"EditEvent_content_attend_button__waurC",content_row:"EditEvent_content_row___4l6z",content_row_label:"EditEvent_content_row_label__7pmeD"}}},function(e){e.O(0,[9774,4885,7739,6775,5334,5666,4921,2888,179],(function(){return t=10076,e(e.s=t);var t}));var t=e.O();_N_E=t}]);