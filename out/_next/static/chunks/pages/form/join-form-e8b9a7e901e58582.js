(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[416],{15861:function(t,e,n){"use strict";n.d(e,{Z:function(){return y}});var r=n(63366),o=n(87462),a=n(67294),i=n(86010),s=n(39707),l=n(27192),c=n(11496),u=n(54502),f=n(98216),p=n(28979);function d(t){return(0,p.Z)("MuiTypography",t)}(0,n(76087).Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var m=n(85893);const _=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],h=(0,c.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],"inherit"!==n.align&&e[`align${(0,f.Z)(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})((({theme:t,ownerState:e})=>(0,o.Z)({margin:0},e.variant&&t.typography[e.variant],"inherit"!==e.align&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16}))),g={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},v={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"};var y=a.forwardRef((function(t,e){const n=(0,u.Z)({props:t,name:"MuiTypography"}),a=(t=>v[t]||t)(n.color),c=(0,s.Z)((0,o.Z)({},n,{color:a})),{align:p="inherit",className:y,component:b,gutterBottom:w=!1,noWrap:j=!1,paragraph:x=!1,variant:N="body1",variantMapping:Z=g}=c,S=(0,r.Z)(c,_),O=(0,o.Z)({},c,{align:p,color:a,className:y,component:b,gutterBottom:w,noWrap:j,paragraph:x,variant:N,variantMapping:Z}),F=b||(x?"p":Z[N]||g[N])||"span",P=(t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:o,variant:a,classes:i}=t,s={root:["root",a,"inherit"!==t.align&&`align${(0,f.Z)(e)}`,n&&"gutterBottom",r&&"noWrap",o&&"paragraph"]};return(0,l.Z)(s,d,i)})(O);return(0,m.jsx)(h,(0,o.Z)({as:F,ref:e,ownerState:O,className:(0,i.default)(P.root,y)},S))}))},39707:function(t,e,n){"use strict";n.d(e,{Z:function(){return l}});var r=n(87462),o=n(63366),a=n(59766),i=n(48528);const s=["sx"];function l(t){const{sx:e}=t,n=(0,o.Z)(t,s),{systemProps:l,otherProps:c}=(t=>{const e={systemProps:{},otherProps:{}};return Object.keys(t).forEach((n=>{i.Gc[n]?e.systemProps[n]=t[n]:e.otherProps[n]=t[n]})),e})(n);let u;return u=Array.isArray(e)?[l,...e]:"function"===typeof e?(...t)=>{const n=e(...t);return(0,a.P)(n)?(0,r.Z)({},l,n):l}:(0,r.Z)({},l,e),(0,r.Z)({},c,{sx:u})}},25802:function(t,e,n){"use strict";n.d(e,{Z:function(){return _}});var r=n(67294),o=n(76798),a=n(59499),i=n(15568),s=n(85893);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var c=r.forwardRef((function(t,e){return(0,s.jsx)(i.Z,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){(0,a.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({elevation:6,ref:e,variant:"filled"},t))})),u=c,f=n(77227),p=function(t){var e=t.open;return(0,s.jsx)(f.Z,{sx:{color:"#fff",zIndex:9999},open:e,children:(0,s.jsx)("img",{src:"/loadingWhite.svg",style:{width:100,height:100},alt:"img"})})},d=n(37196),m=n.n(d),_=function(t){var e=t.openSnack,n=t.snackMsg,r=t.alertType,a=t.openLoading,i=t.onClose;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p,{open:a}),(0,s.jsx)(o.Z,{open:e,anchorOrigin:{vertical:"top",horizontal:"right"},className:m().snack_area,autoHideDuration:3e3,onClose:i,children:(0,s.jsx)(u,{onClose:i,sx:{width:"100%"},severity:r,children:n})})]})}},85882:function(t,e,n){"use strict";n.r(e);var r=n(81356),o=n.n(r),a=n(68447),i=n(11163),s=n(67294),l=n(25617),c=n(15861),u=n(25802),f=n(85893);e.default=function(){var t=(0,l.v9)((function(t){return t.wallet})),e=(0,i.useRouter)(),n=e.query,r=(0,s.useState)({}),p=r[0],d=r[1],m=(0,s.useState)(!1),_=m[0],h=m[1],g=(0,s.useState)(!1),v=g[0],y=g[1],b=(0,s.useState)("success"),w=b[0],j=b[1],x=(0,s.useState)(""),N=x[0],Z=x[1],S=function(t){var e=t.type,n=t.msg;y(!0),h(!1),j(e),Z(n)};(0,s.useLayoutEffect)((function(){O()}),[]);var O=function(){var e,r=t.contract,o=t.walletConnection,a=n.id;return o.isSignedIn()?null===a||""===a||"undefined"===typeof a?P("Could not found any object have that id!"):void(null===r||void 0===r||null===(e=r.get_form)||void 0===e||e.call(r,{id:a}).then((function(t){if(t){var e=t.start_date,n=t.end_date,r=t.participants,o=t.limit_participants,a=t.owner,i=Date.now().toString();if(0===a)return P("This form has not been published!");if(i>n)return P("This form has been ended");if(i<e)return P("This form has not been started");if(o>0&&(null===r||void 0===r?void 0:r.length)>=o)return P("This form has been reached the limitation of participant ");d(t),F()}})).catch((function(t){console.log(t)}))):P("Please login to your wallet first")},F=function(){var r,o=t.contract,a=t.walletConnection,i=n.id;if(!a.isSignedIn())return P("Please login to your wallet first");var s=a.getAccountId();if(null===i||""===i||"undefined"===typeof i)return P("Could not found any object have that id!");null===o||void 0===o||null===(r=o.get_participant_form_status)||void 0===r||r.call(o,{userId:s,formId:i}).then((function(t){t&&t.joined&&e.push("/form/form-answer?id=".concat(i))})).catch((function(t){console.log(t)}))},P=function(t){var n=encodeURIComponent(t);e.push("/error?content=".concat(n))};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(u.Z,{openLoading:_,openSnack:v,alertType:w,snackMsg:N,onClose:function(){y(!1)}}),(0,f.jsx)("div",{className:o().root,children:(0,f.jsxs)("div",{className:o().content,children:[(0,f.jsx)(c.Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Form Detail"}),(0,f.jsxs)("div",{className:o().form_row,children:[(0,f.jsx)("div",{className:o().form_label,children:"Name"}),(0,f.jsx)("div",{className:o().form_input,children:p.title})]}),(0,f.jsxs)("div",{className:o().form_row,children:[(0,f.jsx)("div",{className:o().form_label,children:"Description"}),(0,f.jsx)("div",{className:o().form_input,children:p.description})]}),(0,f.jsxs)("div",{className:o().fee_row,children:[(0,f.jsx)("div",{className:o().fee_label,children:"Joining Fee"}),(0,f.jsx)("div",{className:o().fee_input,children:"0"!==(null===p||void 0===p?void 0:p.enroll_fee)?a.utils.format.formatNearAmount((null===p||void 0===p?void 0:p.enroll_fee)||0)+" \u24c3":"FREE"})]}),(0,f.jsxs)("div",{className:o().fee_row,children:[(0,f.jsx)("div",{className:o().fee_label,children:"Starting time"}),(0,f.jsx)("input",{className:o().fee_input_date,disabled:!0,type:"datetime-local",value:new Date(parseInt((null===p||void 0===p?void 0:p.start_date)||0)).toISOString().replace("Z","")}),(0,f.jsx)("div",{className:o().fee_label_paid,children:"Ending time"}),(0,f.jsx)("input",{className:o().fee_input_date,disabled:!0,type:"datetime-local",value:new Date(parseInt((null===p||void 0===p?void 0:p.end_date)||0)).toISOString().replace("Z","")})]}),(0,f.jsx)("div",{className:o().form_row_button,children:(0,f.jsx)("button",{className:o().form_create_button,onClick:function(){var r=t.contract,o=n.id,a=p.enroll_fee;h(!0),"0"===a?null===r||void 0===r||r.join_form({formId:o},1e14).then((function(t){t?e.push("/form/form-answer?id=".concat(o)):S({type:"error",msg:"Somethings went wrong, try again later!"})})).catch((function(t){S({type:"error",msg:String(t)})})):"0"!==a&&(null===r||void 0===r||r.join_form({formId:o},1e14,a).then((function(t){t?e.push("/form/form-answer?id=".concat(o)):S({type:"error",msg:"Somethings went wrong, try again later!"})})).catch((function(t){S({type:"error",msg:"Somethings went wrong, try again later!"})})))},children:"Join form"})})]})})]})}},57556:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/form/join-form",function(){return n(85882)}])},37196:function(t){t.exports={snack_area:"Notify_snack_area__VKRcf"}},81356:function(t){t.exports={root:"JoinForm_root__Jtn7s",content:"JoinForm_content__lZ_hF",form_row:"JoinForm_form_row__1V_4D",form_label:"JoinForm_form_label__QMBL6",form_input:"JoinForm_form_input__52dCa",form_input_date:"JoinForm_form_input_date__IC6RB",form_row_button:"JoinForm_form_row_button__48C_I",form_button_cancel:"JoinForm_form_button_cancel__NVKHm",form_create_button:"JoinForm_form_create_button__G5F5p",fee_row:"JoinForm_fee_row__HWmfZ",fee_label:"JoinForm_fee_label__AVEz2",fee_input:"JoinForm_fee_input__Aruko",fee_label_paid:"JoinForm_fee_label_paid__BN21J",fee_input_date:"JoinForm_fee_input_date__qreJE"}}},function(t){t.O(0,[7739,6775,9774,2888,179],(function(){return e=57556,t(t.s=e);var e}));var e=t.O();_N_E=e}]);