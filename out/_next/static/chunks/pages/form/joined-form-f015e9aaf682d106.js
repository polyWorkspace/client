(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3191],{45514:function(n,e,t){"use strict";t.r(e);var o=t(9632),l=t(50029),r=t(87794),i=t.n(r),a=t(67294),c=t(9585),_=t.n(c),s=t(7906),u=t(295),d=t(53252),m=t(53184),f=t(53816),v=t(25617),b=t(11163),h=t(85893);e.default=function(){var n,e=[],t=(0,v.v9)((function(n){return n.wallet})),r=(0,b.useRouter)(),c=(0,a.useRef)(!1),p=(0,a.useState)([]),x=p[0],j=p[1];(0,a.useLayoutEffect)((function(){return c.current=!0,J(),function(){c.current=!1}}),[]);var F=r.pathname,J=function(){var n,e=t.contract,o=t.walletConnection.getAccountId();null===e||void 0===e||null===(n=e.get_joined_forms_count)||void 0===n||n.call(e,{userId:o}).then((function(n){N({total:n})})).catch((function(n){console.log(n)}))},N=function(){var n=(0,l.Z)(i().mark((function n(r){var a,c,_,s,u,d;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=r.total,c=t.contract,_=t.walletConnection,s=a%5===0?a/5:parseInt(a/5)+1,u=new Array(s).fill(0),j([]),d=_.getAccountId(),n.next=8,Promise.all(u.map(function(){var n=(0,l.Z)(i().mark((function n(t,l){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.get_joined_forms({userId:d,page:l+1}).then((function(n){if(n&&-1===e.findIndex((function(e){return(null===e||void 0===e?void 0:e.page)===(null===n||void 0===n?void 0:n.page)}))){e.push(n),e.sort((function(n,e){return n.page<e.page?-1:n.page>e.page?1:0}));var t=[];e.map((function(n){return t=[].concat((0,o.Z)(t),(0,o.Z)((null===n||void 0===n?void 0:n.data)||[])),n})),j((0,o.Z)(t))}}));case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),w=function(n){try{if("0"===n)return"unknown";var e=parseFloat(n),t=new Date(e),o=t.toLocaleDateString(),l=t.toLocaleTimeString();return"".concat(o," ").concat(l)}catch(r){return"unknow"}};return(0,h.jsxs)("div",{className:_().root,children:[(0,h.jsxs)("div",{className:_().nav,children:[(0,h.jsx)("div",{className:_().nav_title,children:"My Forms"}),[{id:"all-form",label:"All Form",url:"/form/my-form",icon:null},{id:"share-with-me",label:"Share With Me",url:"/form/joined-form",icon:null}].map((function(n,e){return(0,h.jsxs)(a.Fragment,{children:[(0,h.jsxs)("div",{className:F===n.url?_().nav_label_active:_().nav_label,onClick:function(){return function(n){r.push(n.url)}(n)},children:[n.icon&&(0,h.jsx)(n.icon,{className:_().nav_icon}),n.label]}),(0,h.jsx)("div",{className:_().line})]},e)}))]}),(0,h.jsxs)("div",{className:_().content,children:[(0,h.jsx)("div",{className:_().content_title,children:"Your joined form"}),(0,h.jsx)("div",{className:_().line}),(0,h.jsx)("div",{className:_().table,children:(0,h.jsxs)(s.Z,{children:[(0,h.jsx)(m.Z,{children:(0,h.jsxs)(f.Z,{children:[["Form name","Type","Last summited"].map((function(n,e){return(0,h.jsx)(d.Z,{align:"left",className:_().table_title,children:n.toUpperCase()},e)})),(0,h.jsx)(d.Z,{className:_().table_title,children:"ACTIONS"})]})}),(0,h.jsx)(u.Z,{children:null===x||void 0===x||null===(n=x.map)||void 0===n?void 0:n.call(x,(function(n,e){return(0,h.jsxs)(f.Z,{children:[(0,h.jsx)(d.Z,{className:_().cell,children:n.form_title}),(0,h.jsx)(d.Z,{className:_().cell,children:0===n.type?"Basic":"Card"}),(0,h.jsx)(d.Z,{className:_().cell,children:w(n.last_summited)}),(0,h.jsx)(d.Z,{className:_().cell_action,children:(0,h.jsx)("button",{className:_().table_button_edit,onClick:function(){return function(n){r.push("form-analysis?id=".concat(n.form_id))}(n)},children:"View Analysis"})})]},e)}))})]})})]})]})}},32417:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/form/joined-form",function(){return t(45514)}])},9585:function(n){n.exports={root:"JoinedForm_root__VmaAY",nav:"JoinedForm_nav__mmhJv",content:"JoinedForm_content__5NQYI",table:"JoinedForm_table__MNG2e",content_row:"JoinedForm_content_row__E1lPN",nav_title:"JoinedForm_nav_title__jAbum",nav_label:"JoinedForm_nav_label__715ku",nav_label_active:"JoinedForm_nav_label_active__hJukY",nav_icon:"JoinedForm_nav_icon__DoOq9",line:"JoinedForm_line__gCAqG",table_title:"JoinedForm_table_title__2nj0r",cell:"JoinedForm_cell__EOVkg",cell_select_area:"JoinedForm_cell_select_area__cJm9e",cell_action:"JoinedForm_cell_action__86_bH",table_button_edit:"JoinedForm_table_button_edit__eW_6A",table_button_delete:"JoinedForm_table_button_delete__nFxbj",content_button_delete:"JoinedForm_content_button_delete__r2EnQ",table_icon_select:"JoinedForm_table_icon_select__4C5Sx",table_icon_favor:"JoinedForm_table_icon_favor__77oCB",content_button:"JoinedForm_content_button__dHH_c",content_button_filter:"JoinedForm_content_button_filter__UOAZN",disabled:"JoinedForm_disabled__5WfYW",filter:"JoinedForm_filter__tX6zx",content_title:"JoinedForm_content_title__0nmAw"}}},function(n){n.O(0,[8796,9774,2888,179],(function(){return e=32417,n(n.s=e);var e}));var e=n.O();_N_E=e}]);