(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9397],{13173:function(e,t,n){"use strict";var o=n(95318);t.Z=void 0;var r=o(n(64938)),a=n(85893),i=(0,r.default)((0,a.jsx)("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"}),"DeleteOutlined");t.Z=i},25549:function(e,t,n){"use strict";var o=n(95318);t.Z=void 0;var r=o(n(64938)),a=n(85893),i=(0,r.default)((0,a.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm0 16H5V7h14v12zm-7-8.5c1.84 0 3.48.96 4.34 2.5-.86 1.54-2.5 2.5-4.34 2.5s-3.48-.96-4.34-2.5c.86-1.54 2.5-2.5 4.34-2.5M12 9c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4zm0 5.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}),"PreviewOutlined");t.Z=i},60194:function(e,t,n){"use strict";var o=n(95318);t.Z=void 0;var r=o(n(64938)),a=n(85893),i=(0,r.default)((0,a.jsx)("path",{d:"M12 5.99 19.53 19H4.47L12 5.99M12 2 1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"WarningAmberOutlined");t.Z=i},78262:function(e,t,n){"use strict";n.d(t,{Z:function(){return C}});var o=n(63366),r=n(87462),a=n(67294),i=n(86010),l=n(27192),c=n(57579),s=n(98216),u=n(86983),d=n(16628),_=n(55113),p=n(54502),f=n(11496),m=n(28979);function h(e){return(0,m.Z)("MuiDialog",e)}var v=(0,n(76087).Z)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);var b=(0,a.createContext)({}),x=n(77227),g=n(2734),y=n(85893);const j=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],Z=(0,f.ZP)(x.Z,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),w=(0,f.ZP)(u.Z,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),S=(0,f.ZP)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t[`scroll${(0,s.Z)(n.scroll)}`]]}})((({ownerState:e})=>(0,r.Z)({height:"100%","@media print":{height:"auto"},outline:0},"paper"===e.scroll&&{display:"flex",justifyContent:"center",alignItems:"center"},"body"===e.scroll&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}))),k=(0,f.ZP)(_.Z,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`scrollPaper${(0,s.Z)(n.scroll)}`],t[`paperWidth${(0,s.Z)(String(n.maxWidth))}`],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})((({theme:e,ownerState:t})=>(0,r.Z)({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},"paper"===t.scroll&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},"body"===t.scroll&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!t.maxWidth&&{maxWidth:"calc(100% - 64px)"},"xs"===t.maxWidth&&{maxWidth:"px"===e.breakpoints.unit?Math.max(e.breakpoints.values.xs,444):`${e.breakpoints.values.xs}${e.breakpoints.unit}`,[`&.${v.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}},"xs"!==t.maxWidth&&{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`,[`&.${v.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t.maxWidth]+64)]:{maxWidth:"calc(100% - 64px)"}}},t.fullWidth&&{width:"calc(100% - 64px)"},t.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${v.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})));var C=a.forwardRef((function(e,t){const n=(0,p.Z)({props:e,name:"MuiDialog"}),u=(0,g.Z)(),f={enter:u.transitions.duration.enteringScreen,exit:u.transitions.duration.leavingScreen},{"aria-describedby":m,"aria-labelledby":v,BackdropComponent:x,BackdropProps:C,children:M,className:N,disableEscapeKeyDown:F=!1,fullScreen:P=!1,fullWidth:W=!1,maxWidth:D="sm",onBackdropClick:O,onClose:z,open:E,PaperComponent:A=_.Z,PaperProps:B={},scroll:I="paper",TransitionComponent:R=d.Z,transitionDuration:T=f,TransitionProps:H}=n,$=(0,o.Z)(n,j),L=(0,r.Z)({},n,{disableEscapeKeyDown:F,fullScreen:P,fullWidth:W,maxWidth:D,scroll:I}),V=(e=>{const{classes:t,scroll:n,maxWidth:o,fullWidth:r,fullScreen:a}=e,i={root:["root"],container:["container",`scroll${(0,s.Z)(n)}`],paper:["paper",`paperScroll${(0,s.Z)(n)}`,`paperWidth${(0,s.Z)(String(o))}`,r&&"paperFullWidth",a&&"paperFullScreen"]};return(0,l.Z)(i,h,t)})(L),K=a.useRef(),X=(0,c.Z)(v),Y=a.useMemo((()=>({titleId:X})),[X]);return(0,y.jsx)(w,(0,r.Z)({className:(0,i.default)(V.root,N),BackdropProps:(0,r.Z)({transitionDuration:T,as:x},C),closeAfterTransition:!0,BackdropComponent:Z,disableEscapeKeyDown:F,onClose:z,open:E,ref:t,onClick:e=>{K.current&&(K.current=null,O&&O(e),z&&z(e,"backdropClick"))},ownerState:L},$,{children:(0,y.jsx)(R,(0,r.Z)({appear:!0,in:E,timeout:T,role:"presentation"},H,{children:(0,y.jsx)(S,{className:(0,i.default)(V.container),onMouseDown:e=>{K.current=e.target===e.currentTarget},ownerState:L,children:(0,y.jsx)(k,(0,r.Z)({as:A,elevation:24,role:"dialog","aria-describedby":m,"aria-labelledby":X},B,{className:(0,i.default)(V.paper,B.className),ownerState:L,children:(0,y.jsx)(b.Provider,{value:Y,children:M})}))})}))}))}))},3167:function(e,t,n){"use strict";n(67294);var o=n(78262),r=n(60194),a=n(2077),i=n.n(a),l=n(85893);t.Z=function(e){var t=e.label,n=void 0===t?{}:t,a=e.onAccept,c=e.onCancel;return(0,l.jsx)(o.Z,{open:!0,"aria-labelledby":"draggable-dialog-title",children:(0,l.jsxs)("div",{className:i().root,children:[(0,l.jsx)("div",{className:i().root_title,children:n.title}),(0,l.jsxs)("div",{className:i().root_content,children:[(0,l.jsx)(r.Z,{className:i().root_content_icon}),(0,l.jsx)("div",{className:i().root_content_text,children:n.desc})]}),(0,l.jsxs)("div",{className:i().root_action,children:[(0,l.jsx)("button",{onClick:c,className:i().root_action_cancel,children:n.cancel}),(0,l.jsx)("button",{onClick:function(){null===a||void 0===a||a()},className:i().root_action_accept,children:n.accept})]})]})})}},25802:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var o=n(67294),r=n(76798),a=n(59499),i=n(15568),l=n(85893);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var s=o.forwardRef((function(e,t){return(0,l.jsx)(i.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({elevation:6,ref:t,variant:"filled"},e))})),u=s,d=n(77227),_=function(e){var t=e.open;return(0,l.jsx)(d.Z,{sx:{color:"#fff",zIndex:9999},open:t,children:(0,l.jsx)("img",{src:"/loadingWhite.svg",style:{width:100,height:100},alt:"img"})})},p=n(37196),f=n.n(p),m=function(e){var t=e.openSnack,n=e.snackMsg,o=e.alertType,a=e.openLoading,i=e.onClose;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(_,{open:a}),(0,l.jsx)(r.Z,{open:t,anchorOrigin:{vertical:"top",horizontal:"right"},className:f().snack_area,autoHideDuration:3e3,onClose:i,children:(0,l.jsx)(u,{onClose:i,sx:{width:"100%"},severity:o,children:n})})]})}},43848:function(e,t,n){"use strict";n.r(t);var o=n(9632),r=n(50029),a=n(87794),i=n.n(a),l=n(67294),c=n(52905),s=n.n(c),u=n(7906),d=n(295),_=n(53252),p=n(53184),f=n(53816),m=n(25549),h=n(13173),v=n(25617),b=n(11163),x=n(12873),g=n(55819),y=n(25802),j=n(3167),Z=n(85893);t.default=(0,b.withRouter)((function(){var e,t=[],n=(0,v.v9)((function(e){return e.wallet})),a=(0,b.useRouter)(),c=a.query,k=(0,l.useRef)(!1),C=(0,l.useState)([]),M=C[0],N=C[1],F=(0,l.useState)(c.filter||"editable"),P=F[0],W=F[1],D=(0,l.useState)(!1),O=D[0],z=D[1],E=(0,l.useState)([]),A=E[0],B=E[1],I=(0,l.useState)({}),R=I[0],T=I[1],H=(0,l.useState)(!1),$=H[0],L=H[1],V=(0,l.useState)(!1),K=V[0],X=V[1],Y=(0,l.useState)("success"),q=Y[0],Q=Y[1],J=(0,l.useState)(""),G=J[0],U=J[1],ee=function(e){var t=e.type,n=e.msg;X(!0),L(!1),Q(t),U(n)};(0,l.useLayoutEffect)((function(){k.current=!0;var e=c.filter;return null!==e&&""!==e&&"undefined"!==typeof e||a.push("?filter=editable"),ne(),function(){k.current=!1}}),[]);var te=a.pathname,ne=function(){var e,t=n.contract,o=n.walletConnection.getAccountId();null===t||void 0===t||null===(e=t.get_form_count)||void 0===e||e.call(t,{userId:o}).then((function(e){oe({total:e})})).catch((function(e){console.log(e)}))},oe=function(){var e=(0,r.Z)(i().mark((function e(a){var l,c,s,u,d,_;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=a.total,c=n.contract,s=n.walletConnection,u=l%5===0?l/5:parseInt(l/5)+1,d=new Array(u).fill(0),N([]),_=s.getAccountId(),e.next=8,Promise.all(d.map(function(){var e=(0,r.Z)(i().mark((function e(n,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.get_forms({userId:_,page:r+1}).then((function(e){if(e&&-1===t.findIndex((function(t){return(null===t||void 0===t?void 0:t.page)===(null===e||void 0===e?void 0:e.page)}))){t.push(e),t.sort((function(e,t){return e.page<t.page?-1:e.page>t.page?1:0}));var n=[];t.map((function(e){return n=[].concat((0,o.Z)(n),(0,o.Z)((null===e||void 0===e?void 0:e.data)||[])),e})),k&&B((0,o.Z)(n))}}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(e){a.push("/form/view-form?id=".concat(e.id))},ae=function(e){try{var t=parseFloat(e),n=new Date(t),o=n.toLocaleDateString(),r=n.toLocaleTimeString();return"".concat(o," ").concat(r)}catch(a){return"unknow"}},ie=function(e){switch(e.cast_status){case 0:return"Editable";case 1:return"Waiting for publish";case 2:return"Publishing";case 3:return"Finished";default:return"unknown"}};(0,l.useEffect)((function(){le()}),[P]),(0,l.useEffect)((function(){ce(),le()}),[A]);var le=function(){var e=c.filter;if("editable"===e){var t=A.filter((function(e){return 0===e.status}));N((0,o.Z)(t))}else if("publishing"===e){var n=Date.now(),r=A.filter((function(e){return 1===e.status&&e.end_date>n}));N((0,o.Z)(r))}else if("finished"===e){var a=Date.now(),i=A.filter((function(e){return 1===e.status&&e.end_date<a||2===e.status}));N((0,o.Z)(i))}else N((0,o.Z)(A))},ce=function(){null===A||void 0===A||A.map((function(e){var t=e.status,n=e.start_date,o=e.end_date,r=Date.now();return 0===t&&(e.cast_status=0),1===t&&r<n&&(e.cast_status=1),1===t&&r>n&&r<o&&(e.cast_status=2),(1===t&&r>o||2===t)&&(e.cast_status=3),e}))};return(0,Z.jsxs)(Z.Fragment,{children:[O&&(0,Z.jsx)(j.Z,{label:S,onAccept:function(){var e,t=n.contract;z(!1),L(!0),null===t||void 0===t||null===(e=t.delete_form)||void 0===e||e.call(t,{id:null===R||void 0===R?void 0:R.id},5e13).then((function(e){e?(ee({type:"success",msg:"Form has been deleted"}),ne()):ee({type:"error",msg:"Somethings went wrong, try again later"})})).catch((function(e){ee({type:"success",msg:String(e)})}))},onCancel:function(){z(!1)}}),(0,Z.jsx)(y.Z,{openLoading:$,openSnack:K,alertType:q,snackMsg:G,onClose:function(){X(!1)}}),(0,Z.jsxs)("div",{className:s().root,children:[(0,Z.jsxs)("div",{className:s().nav,children:[(0,Z.jsx)("div",{className:s().nav_title,children:"My Forms"}),w.map((function(e,t){return(0,Z.jsxs)(l.Fragment,{children:[(0,Z.jsxs)("div",{className:te===e.url?s().nav_label_active:s().nav_label,onClick:function(){return function(e){a.push(e.url)}(e)},children:[e.icon&&(0,Z.jsx)(e.icon,{className:s().nav_icon}),e.label]}),(0,Z.jsx)("div",{className:s().line})]},t)}))]}),(0,Z.jsxs)("div",{className:s().content,children:[(0,Z.jsxs)("div",{className:s().content_row,children:[(0,Z.jsx)("div",{className:s().filter,children:"Filter:"}),(0,Z.jsxs)(x.Z,{value:P,onChange:function(e){a.push("?filter=".concat(e.target.value)).then((function(t){t&&W(e.target.value)})).catch((function(e){console.log(e)}))},className:s().content_button_filter,inputProps:{"aria-label":"Without label"},displayEmpty:!0,children:[(0,Z.jsx)(g.Z,{value:"all",children:"All"}),(0,Z.jsx)(g.Z,{value:"editable",children:"Editable"}),(0,Z.jsx)(g.Z,{value:"publishing",children:"Publishing"}),(0,Z.jsx)(g.Z,{value:"finished",children:"Finished"})]})]}),(0,Z.jsx)("div",{className:s().line}),(0,Z.jsx)("div",{className:s().table,children:(0,Z.jsxs)(u.Z,{children:[(0,Z.jsx)(p.Z,{children:(0,Z.jsxs)(f.Z,{children:[["Form name","Submissions","Type","Created at","status"].map((function(e,t){return(0,Z.jsx)(_.Z,{align:"left",className:s().table_title,children:e.toUpperCase()},t)})),(0,Z.jsx)(_.Z,{className:s().table_title,children:"ACTIONS"})]})}),(0,Z.jsx)(d.Z,{children:null===M||void 0===M||null===(e=M.map)||void 0===e?void 0:e.call(M,(function(e,t){var n;return(0,Z.jsxs)(f.Z,{children:[(0,Z.jsx)(_.Z,{className:s().cell_title,onClick:function(){return re(e)},children:e.title}),(0,Z.jsx)(_.Z,{className:s().cell,children:null===(n=e.participants)||void 0===n?void 0:n.length}),(0,Z.jsx)(_.Z,{className:s().cell,children:0===e.type?"Basic":"Card"}),(0,Z.jsx)(_.Z,{className:s().cell,children:ae(e.created_at)}),(0,Z.jsx)(_.Z,{className:s().cell,children:ie(e)}),(0,Z.jsx)(_.Z,{className:s().cell_action,children:(0,Z.jsxs)("div",{className:s().action_button_area,children:[(0,Z.jsxs)("button",{className:s().table_button_edit,onClick:function(){return re(e)},children:[(0,Z.jsx)(m.Z,{className:s().table_button_icon})," View"]}),(0,Z.jsxs)("button",{className:s().table_button_delete,onClick:function(){return T(e),void z(!0)},children:[(0,Z.jsx)(h.Z,{className:s().table_button_icon})," Delete"]})]})})]},t)}))})]})})]})]})]})}));var w=[{id:"all-form",label:"All Form",url:"/form/my-form",icon:null},{id:"share-with-me",label:"Share With Me",url:"/form/joined-form",icon:null}],S={title:"Confirmation",desc:"Are you sure to delete this form?",accept:"Accept",cancel:"Deny"}},13035:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/form/my-form",function(){return n(43848)}])},2077:function(e){e.exports={root:"Confirmation_root__ePbH8",root_title:"Confirmation_root_title__vzCn_",root_content:"Confirmation_root_content__LQ5jl",root_content_icon:"Confirmation_root_content_icon__7nGIz",root_content_text:"Confirmation_root_content_text__KISZB",root_action:"Confirmation_root_action__v9fOe",root_action_cancel:"Confirmation_root_action_cancel__0ishS",root_action_accept:"Confirmation_root_action_accept__KjTK0"}},37196:function(e){e.exports={snack_area:"Notify_snack_area__VKRcf"}},52905:function(e){e.exports={root:"MyForm_root__apHNi",nav:"MyForm_nav__ZJ8E0",content:"MyForm_content__5VMOR",table:"MyForm_table__sO3or",content_row:"MyForm_content_row__k3b9E",nav_title:"MyForm_nav_title__gyMz_",nav_label:"MyForm_nav_label__zXz_2",nav_label_active:"MyForm_nav_label_active__LJVIP",nav_icon:"MyForm_nav_icon__vezv4",line:"MyForm_line__C_cmq",table_title:"MyForm_table_title__Hem4Q",cell:"MyForm_cell__fRD34",cell_select_area:"MyForm_cell_select_area__LJQs8",cell_title:"MyForm_cell_title__Hb63F",cell_action:"MyForm_cell_action__dqm13",action_button_area:"MyForm_action_button_area__n_zAS",table_button_edit:"MyForm_table_button_edit__tbCYY",table_button_delete:"MyForm_table_button_delete__N1j0u",content_button_delete:"MyForm_content_button_delete__ONYPI",table_button_icon:"MyForm_table_button_icon__5er_P",table_icon_select:"MyForm_table_icon_select__oLbxP",table_icon_favor:"MyForm_table_icon_favor__QvnYq",content_button:"MyForm_content_button__xRvVi",content_button_filter:"MyForm_content_button_filter__4l_ii",disabled:"MyForm_disabled__lleGT",filter:"MyForm_filter__1sDXo"}}},function(e){e.O(0,[7739,6775,9991,8796,9774,2888,179],(function(){return t=13035,e(e.s=t);var t}));var t=e.O();_N_E=t}]);